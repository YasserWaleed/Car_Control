/**********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------**
 *    FILE NAME			:  PWM_program.c
 *   BRIEF DESCRIPTION	:  Implementation of PWM_interface.h
 *   AUTHOR				:  Yasser Waleed
 *********************************************************************************************************************/
/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include <avr/io.h>
#include "ADC_interface.h"
#include "../Library/stdtypes.h"
/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/
void ADC_Init()
{
	ADCSRA = (1<<ADEN)|(7 << ADPS0);        /*Enable, div128*/
}

u8 ADC_Read(u8 channel)
{
	ADMUX = (1 << REFS0)|(1<<ADLAR)|(channel << MUX0);	// VREF, 8-bit, channel #0-1 is on PA0-PA1 pins
	_delay_us(10);              						// allow multiplexer to settle
	ADCSRA |= (1<<ADSC);       							// Start Conversion
	while (ADCSRA & (1<<ADSC)); 						// wait for completion
	return ADCH;                						// 8-bit result because we use ADLAR
}
/**********************************************************************************************************************
 *  END OF FILE: ADC_program.c
 *********************************************************************************************************************/
